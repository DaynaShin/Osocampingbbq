<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê´€ë¦¬ì í˜ì´ì§€ - ì˜¤ì†Œë§ˆì¼€íŒ…</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body style="background: #f5f6fa;">
    <!-- ê´€ë¦¬ì í—¤ë” -->
    <header class="admin-header">
        <h1>ì˜ˆì•½ ê´€ë¦¬ ì‹œìŠ¤í…œ</h1>
        <nav class="admin-nav">
            <a href="index.html" class="nav-btn">ê³ ê° í˜ì´ì§€</a>
            <button class="nav-btn active" onclick="showSection('dashboard')">ëŒ€ì‹œë³´ë“œ</button>
            <button class="nav-btn" onclick="showSection('reservations')">ì˜ˆì•½ ëª©ë¡</button>
            <button class="nav-btn" onclick="showSection('products')">ìƒí’ˆ ë“±ë¡</button>
            <button class="nav-btn" onclick="showSection('bookings')">ì˜ˆì•½í˜„í™©</button>
        </nav>
    </header>

    <main class="admin-main">
        <!-- ëŒ€ì‹œë³´ë“œ ì„¹ì…˜ -->
        <div id="dashboard-section" class="section active">
            <div class="stats-grid">
                <div class="stat-card">
                    <h3 id="totalReservations">0</h3>
                    <p>ì „ì²´ ì˜ˆì•½</p>
                </div>
                <div class="stat-card">
                    <h3 id="todayReservations">0</h3>
                    <p>ì˜¤ëŠ˜ ì˜ˆì•½</p>
                </div>
                <div class="stat-card">
                    <h3 id="pendingReservations">0</h3>
                    <p>ëŒ€ê¸° ì¤‘</p>
                </div>
                <div class="stat-card">
                    <h3 id="confirmedReservations">0</h3>
                    <p>í™•ì • ì˜ˆì•½</p>
                </div>
            </div>

            <!-- ìµœê·¼ ì˜ˆì•½ ëª©ë¡ -->
            <div class="reservations-section">
                <div class="section-header">
                    <h2>ìµœê·¼ ì˜ˆì•½</h2>
                </div>
                <!-- ë¹ˆ ìƒíƒœ ë©”ì‹œì§€ (ëŒ€ì‹œë³´ë“œ) -->
                <div id="dashboardEmptyState" class="empty-state" style="display: none;">
                    <div class="empty-state-content">
                        <div class="empty-state-icon">ğŸ“‹</div>
                        <h3>ì•„ì§ ì˜ˆì•½ì´ ì—†ìŠµë‹ˆë‹¤</h3>
                        <p>ì²« ë²ˆì§¸ ì˜ˆì•½ì„ ë°›ì•„ë³´ì„¸ìš”!</p>
                        <a href="index.html" class="empty-state-btn">ì˜ˆì•½ í˜ì´ì§€ë¡œ ì´ë™</a>
                    </div>
                </div>

                <div class="table-container">
                    <table class="reservations-table">
                        <thead>
                            <tr>
                                <th>ë‚ ì§œ</th>
                                <th>ì‹œê°„</th>
                                <th>ì´ë¦„</th>
                                <th>ì—°ë½ì²˜</th>
                                <th>ì„œë¹„ìŠ¤</th>
                                <th>ìƒíƒœ</th>
                            </tr>
                        </thead>
                        <tbody id="recentReservationsTable">
                            <tr>
                                <td colspan="6" class="text-center">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- ì˜ˆì•½ ëª©ë¡ ì„¹ì…˜ -->
        <div id="reservations-section" class="section" style="display: none;">
            <div class="reservations-section">
                <div class="section-header">
                    <h2>ì˜ˆì•½ ëª©ë¡ ê´€ë¦¬</h2>
                    <div class="filter-controls">
                        <select id="statusFilter">
                            <option value="">ì „ì²´ ìƒíƒœ</option>
                            <option value="pending">ëŒ€ê¸° ì¤‘</option>
                            <option value="confirmed">í™•ì •</option>
                            <option value="cancelled">ì·¨ì†Œ</option>
                        </select>
                        <input type="date" id="dateFilter" placeholder="ë‚ ì§œ ì„ íƒ">
                        <button class="refresh-btn" onclick="loadReservations()">
                            <span id="refreshText">ìƒˆë¡œê³ ì¹¨</span>
                        </button>
                    </div>
                </div>
                
                <!-- ë¹ˆ ìƒíƒœ ë©”ì‹œì§€ (ì˜ˆì•½ ëª©ë¡) -->
                <div id="reservationsEmptyState" class="empty-state" style="display: none;">
                    <div class="empty-state-content">
                        <div class="empty-state-icon">ğŸ“</div>
                        <h3>ì˜ˆì•½ì´ ì—†ìŠµë‹ˆë‹¤</h3>
                        <p>ì•„ì§ ë“±ë¡ëœ ì˜ˆì•½ì´ ì—†ìŠµë‹ˆë‹¤.<br>ê³ ê°ë“¤ì˜ ì˜ˆì•½ì„ ê¸°ë‹¤ë ¤ë³´ì„¸ìš”!</p>
                        <a href="index.html" class="empty-state-btn">ì˜ˆì•½ í˜ì´ì§€ë¡œ ì´ë™</a>
                    </div>
                </div>

                <div class="table-container">
                    <table class="reservations-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>ì˜ˆì•½ì¼</th>
                                <th>ì‹œê°„</th>
                                <th>ê³ ê°ëª…</th>
                                <th>ì—°ë½ì²˜</th>
                                <th>ì´ë©”ì¼</th>
                                <th>ì„œë¹„ìŠ¤</th>
                                <th>ìƒíƒœ</th>
                                <th>ì•¡ì…˜</th>
                            </tr>
                        </thead>
                        <tbody id="reservationsTable">
                            <tr>
                                <td colspan="9" class="text-center">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- ìƒí’ˆ ë“±ë¡ ì„¹ì…˜ -->
        <div id="products-section" class="section" style="display: none;">
            <div class="product-registration-section">
                <div class="section-header">
                    <h2>ìƒí’ˆ ë“±ë¡</h2>
                </div>
                
                <div class="product-form-container">
                    <form id="productForm" class="product-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="product_name">ê´€ë¦¬ìš© ìƒí’ˆëª… *</label>
                                <input type="text" id="product_name" name="product_name" required 
                                       placeholder="ê´€ë¦¬ìš© ìƒí’ˆëª…ì„ ì…ë ¥í•˜ì„¸ìš”">
                            </div>
                            
                            <div class="form-group">
                                <label for="display_name">ê³ ê°ìš© í‘œì‹œëª… *</label>
                                <input type="text" id="display_name" name="display_name" required 
                                       placeholder="ê³ ê°ì—ê²Œ ë³´ì—¬ì§ˆ ìƒí’ˆëª…ì„ ì…ë ¥í•˜ì„¸ìš”">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="product_code">ìƒí’ˆì½”ë“œ *</label>
                                <input type="text" id="product_code" name="product_code" required 
                                       placeholder="ì˜ˆ: P001, PROD-001">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="product_date">ë‚ ì§œ *</label>
                                <input type="date" id="product_date" name="product_date" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="product_price">ê°€ê²© *</label>
                                <input type="number" id="product_price" name="product_price" required 
                                       placeholder="0" min="0" step="1000">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="start_time">ì‹œì‘ ì‹œê°„ *</label>
                                <input type="time" id="start_time" name="start_time" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="end_time">ì¢…ë£Œ ì‹œê°„ *</label>
                                <input type="time" id="end_time" name="end_time" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="product_description">ìƒí’ˆ ì„¤ëª…</label>
                            <textarea id="product_description" name="product_description" rows="4" 
                                      placeholder="ìƒí’ˆì— ëŒ€í•œ ìƒì„¸ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”"></textarea>
                        </div>

                        <div class="form-actions">
                            <button type="reset" class="action-btn cancel">ì´ˆê¸°í™”</button>
                            <button type="submit" class="action-btn confirm">
                                <span class="btn-text">ìƒí’ˆ ë“±ë¡</span>
                                <span class="btn-loader" style="display: none;">ë“±ë¡ ì¤‘...</span>
                            </button>
                        </div>
                    </form>
                </div>

                <!-- ë“±ë¡ëœ ìƒí’ˆ ëª©ë¡ -->
                <div class="registered-products">
                    <div class="section-header">
                        <h3>ë“±ë¡ëœ ìƒí’ˆ ëª©ë¡</h3>
                        <button class="refresh-btn" onclick="loadProducts()">
                            <span id="productRefreshText">ìƒˆë¡œê³ ì¹¨</span>
                        </button>
                    </div>
                    
                    <div class="table-container">
                        <table class="reservations-table">
                            <thead>
                                <tr>
                                    <th>ìƒí’ˆë²ˆí˜¸</th>
                                    <th>ìƒí’ˆëª…</th>
                                    <th>ë‚ ì§œ</th>
                                    <th>ì‹œê°„</th>
                                    <th>ê°€ê²©</th>
                                    <th>ë“±ë¡ì¼</th>
                                    <th>ì•¡ì…˜</th>
                                </tr>
                            </thead>
                            <tbody id="productsTable">
                                <tr>
                                    <td colspan="7" class="text-center">ë“±ë¡ëœ ìƒí’ˆì´ ì—†ìŠµë‹ˆë‹¤.</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- ì˜ˆì•½í˜„í™© ì„¹ì…˜ -->
        <div id="bookings-section" class="section" style="display: none;">
            <div class="bookings-section">
                <div class="section-header">
                    <h2>ì˜ˆì•½í˜„í™© ê´€ë¦¬</h2>
                    <div class="filter-controls">
                        <select id="bookingStatusFilter">
                            <option value="">ì „ì²´ ìƒíƒœ</option>
                            <option value="confirmed">í™•ì •</option>
                            <option value="pending">ëŒ€ê¸° ì¤‘</option>
                            <option value="cancelled">ì·¨ì†Œ</option>
                            <option value="completed">ì™„ë£Œ</option>
                        </select>
                        <input type="date" id="bookingDateFilter" placeholder="ë‚ ì§œ ì„ íƒ">
                        <input type="text" id="customerSearchFilter" placeholder="ê³ ê°ëª… ê²€ìƒ‰">
                        <button class="refresh-btn" onclick="loadBookings()">
                            <span id="bookingRefreshText">ìƒˆë¡œê³ ì¹¨</span>
                        </button>
                    </div>
                </div>
                
                <!-- ì˜ˆì•½í˜„í™© í†µê³„ -->
                <div class="booking-stats">
                    <div class="stats-grid" style="margin-bottom: 30px;">
                        <div class="stat-card">
                            <h3 id="totalBookings">0</h3>
                            <p>ì „ì²´ ì˜ˆì•½í˜„í™©</p>
                        </div>
                        <div class="stat-card">
                            <h3 id="confirmedBookings">0</h3>
                            <p>í™•ì • ì˜ˆì•½</p>
                        </div>
                        <div class="stat-card">
                            <h3 id="pendingBookings">0</h3>
                            <p>ëŒ€ê¸° ì¤‘</p>
                        </div>
                        <div class="stat-card">
                            <h3 id="todayBookings">0</h3>
                            <p>ì˜¤ëŠ˜ ì˜ˆì•½</p>
                        </div>
                    </div>
                </div>
                
                <!-- ë¹ˆ ìƒíƒœ ë©”ì‹œì§€ (ì˜ˆì•½í˜„í™©) -->
                <div id="bookingsEmptyState" class="empty-state" style="display: none;">
                    <div class="empty-state-content">
                        <div class="empty-state-icon">ğŸ¯</div>
                        <h3>ì˜ˆì•½í˜„í™©ì´ ì—†ìŠµë‹ˆë‹¤</h3>
                        <p>ì•„ì§ ë“±ë¡ëœ ì˜ˆì•½í˜„í™©ì´ ì—†ìŠµë‹ˆë‹¤.<br>ê³ ê°ë“¤ì˜ ì˜ˆì•½ì„ ê¸°ë‹¤ë ¤ë³´ì„¸ìš”!</p>
                    </div>
                </div>

                <div class="table-container">
                    <table class="reservations-table">
                        <thead>
                            <tr>
                                <th>ì˜ˆì•½ID</th>
                                <th>ê³ ê°ëª…</th>
                                <th>ì—°ë½ì²˜</th>
                                <th>ì˜ˆì•½ì¼</th>
                                <th>ì˜ˆì•½ì‹œê°„</th>
                                <th>ìƒí’ˆëª…</th>
                                <th>ì¸ì›ìˆ˜</th>
                                <th>ì´ ê¸ˆì•¡</th>
                                <th>ìƒíƒœ</th>
                                <th>ì˜ˆì•½ì¼ì‹œ</th>
                                <th>ì•¡ì…˜</th>
                            </tr>
                        </thead>
                        <tbody id="bookingsTable">
                            <tr>
                                <td colspan="11" class="text-center">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </main>

    <!-- ì˜ˆì•½ ìƒì„¸ ëª¨ë‹¬ -->
    <div id="reservationModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ì˜ˆì•½ ìƒì„¸ ì •ë³´</h3>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div id="modalBody">
                <!-- ì˜ˆì•½ ìƒì„¸ ì •ë³´ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
            </div>
            <div style="margin-top: 20px; text-align: right;">
                <button class="action-btn cancel" onclick="closeModal()">ë‹«ê¸°</button>
            </div>
        </div>
    </div>

    <!-- ìƒíƒœ ë³€ê²½ í™•ì¸ ëª¨ë‹¬ -->
    <div id="confirmModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ìƒíƒœ ë³€ê²½ í™•ì¸</h3>
                <button class="modal-close" onclick="closeConfirmModal()">&times;</button>
            </div>
            <div id="confirmMessage">
                <!-- í™•ì¸ ë©”ì‹œì§€ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
            </div>
            <div style="margin-top: 20px; text-align: right;">
                <button class="action-btn cancel" onclick="closeConfirmModal()">ì·¨ì†Œ</button>
                <button class="action-btn confirm" id="confirmButton">í™•ì¸</button>
            </div>
        </div>
    </div>

    <!-- ì•Œë¦¼ ë©”ì‹œì§€ -->
    <div id="adminMessageContainer" class="message-container" style="display: none;">
        <div id="adminMessageContent" class="message"></div>
        <button id="closeAdminMessage" class="close-btn">Ã—</button>
    </div>

    <!-- Scripts -->
    <script src="supabase-config.js"></script>
    <script src="script.js"></script>
    <script src="admin-functions.js"></script>
    <script>
        // ê´€ë¦¬ì í˜ì´ì§€ ì „ìš© JavaScript
        let currentReservationId = null;
        let currentAction = null;

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            loadDashboardStats();
            loadRecentReservations();
            setupAdminEventListeners();
        });

        // ê´€ë¦¬ì í˜ì´ì§€ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
        function setupAdminEventListeners() {
            // í•„í„° ì´ë²¤íŠ¸
            document.getElementById('statusFilter').addEventListener('change', loadReservations);
            document.getElementById('dateFilter').addEventListener('change', loadReservations);
            
            // ìƒí’ˆ ë“±ë¡ í¼ ì´ë²¤íŠ¸
            document.getElementById('productForm').addEventListener('submit', handleProductSubmit);
            
            // ì˜ˆì•½í˜„í™© í•„í„° ì´ë²¤íŠ¸
            document.getElementById('bookingStatusFilter').addEventListener('change', loadBookings);
            document.getElementById('bookingDateFilter').addEventListener('change', loadBookings);
            document.getElementById('customerSearchFilter').addEventListener('input', debounce(loadBookings, 500));
            
            // ê´€ë¦¬ì ë©”ì‹œì§€ ë‹«ê¸°
            document.getElementById('closeAdminMessage').addEventListener('click', hideAdminMessage);
            
            // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
            window.addEventListener('click', function(event) {
                const modal = document.getElementById('reservationModal');
                const confirmModal = document.getElementById('confirmModal');
                if (event.target === modal) closeModal();
                if (event.target === confirmModal) closeConfirmModal();
            });
        }

        // ìƒí’ˆ ë“±ë¡ í¼ ì œì¶œ ì²˜ë¦¬
        async function handleProductSubmit(event) {
            event.preventDefault();
            
            const form = event.target;
            const formData = new FormData(form);
            const submitBtn = form.querySelector('button[type="submit"]');
            const btnText = submitBtn.querySelector('.btn-text');
            const btnLoader = submitBtn.querySelector('.btn-loader');
            
            // ìœ íš¨ì„± ê²€ì‚¬
            if (!validateProductForm(form)) {
                return;
            }
            
            // ë¡œë”© ìƒíƒœ ì‹œì‘
            submitBtn.disabled = true;
            btnText.style.display = 'none';
            btnLoader.style.display = 'inline-flex';
            
            try {
                // ìƒí’ˆë²ˆí˜¸ ì¤‘ë³µ ì²´í¬
                const productCode = formData.get('product_code').trim();
                const duplicateCheck = await getProductByCode(productCode);
                
                if (duplicateCheck.success && duplicateCheck.data) {
                    throw new Error('ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ìƒí’ˆë²ˆí˜¸ì…ë‹ˆë‹¤.');
                }
                
                // ì‹œê°„ ìœ íš¨ì„± ì²´í¬ (ì‹œì‘ ì‹œê°„ < ì¢…ë£Œ ì‹œê°„)
                const startTime = formData.get('start_time');
                const endTime = formData.get('end_time');
                
                if (startTime >= endTime) {
                    throw new Error('ì¢…ë£Œ ì‹œê°„ì€ ì‹œì‘ ì‹œê°„ë³´ë‹¤ ëŠ¦ì–´ì•¼ í•©ë‹ˆë‹¤.');
                }
                
                // í¼ ë°ì´í„°ë¥¼ ê°ì²´ë¡œ ë³€í™˜
                const productData = {
                    product_name: formData.get('product_name').trim(),
                    display_name: formData.get('display_name').trim(),
                    product_code: productCode,
                    product_date: formData.get('product_date'),
                    start_time: startTime,
                    end_time: endTime,
                    price: parseInt(formData.get('product_price')),
                    description: formData.get('product_description')?.trim() || null
                };
                
                // Supabaseì— ìƒí’ˆ ì €ì¥
                const result = await createProduct(productData);
                
                if (result.success) {
                    showAdminMessage('ìƒí’ˆì´ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
                    form.reset();
                    loadProducts(); // ìƒí’ˆ ëª©ë¡ ìƒˆë¡œê³ ì¹¨
                } else {
                    throw new Error(result.error || 'ìƒí’ˆ ë“±ë¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                }
                
            } catch (error) {
                console.error('ìƒí’ˆ ë“±ë¡ ì˜¤ë¥˜:', error);
                showAdminMessage(error.message || 'ìƒí’ˆ ë“±ë¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');
            } finally {
                // ë¡œë”© ìƒíƒœ ì¢…ë£Œ
                submitBtn.disabled = false;
                btnText.style.display = 'inline';
                btnLoader.style.display = 'none';
            }
        }

        // ìƒí’ˆ í¼ ìœ íš¨ì„± ê²€ì‚¬
        function validateProductForm(form) {
            let isValid = true;
            const requiredFields = form.querySelectorAll('input[required]');
            
            // í•„ìˆ˜ í•„ë“œ ì²´í¬
            requiredFields.forEach(field => {
                const value = field.value.trim();
                if (!value) {
                    showFieldError(field, 'ì´ í•„ë“œëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤.');
                    isValid = false;
                } else {
                    clearFieldError(field);
                }
            });
            
            // ê°€ê²© ìœ íš¨ì„± ì²´í¬
            const priceField = form.querySelector('#product_price');
            const price = parseInt(priceField.value);
            if (price < 0) {
                showFieldError(priceField, 'ê°€ê²©ì€ 0 ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.');
                isValid = false;
            }
            
            // ìƒí’ˆë²ˆí˜¸ í˜•ì‹ ì²´í¬ (ì˜ë¬¸, ìˆ«ì, í•˜ì´í”ˆë§Œ í—ˆìš©)
            const codeField = form.querySelector('#product_code');
            const codePattern = /^[A-Za-z0-9-]+$/;
            if (!codePattern.test(codeField.value.trim())) {
                showFieldError(codeField, 'ìƒí’ˆë²ˆí˜¸ëŠ” ì˜ë¬¸, ìˆ«ì, í•˜ì´í”ˆë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
                isValid = false;
            }
            
            return isValid;
        }

        // ìƒí’ˆ ëª©ë¡ ë¡œë“œ
        async function loadProducts() {
            const refreshBtn = document.getElementById('productRefreshText');
            refreshBtn.innerHTML = '<span class="loading-spinner"></span>';
            
            try {
                const result = await getProducts();
                if (result.success && result.data) {
                    displayProducts(result.data);
                } else {
                    throw new Error(result.error || 'ìƒí’ˆ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                }
            } catch (error) {
                console.error('ìƒí’ˆ ëª©ë¡ ë¡œë“œ ì˜¤ë¥˜:', error);
                showAdminMessage('ìƒí’ˆ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');
            } finally {
                refreshBtn.textContent = 'ìƒˆë¡œê³ ì¹¨';
            }
        }

        // ìƒí’ˆ ëª©ë¡ í‘œì‹œ
        function displayProducts(products) {
            const tbody = document.getElementById('productsTable');
            
            if (!products || products.length === 0) {
                tbody.innerHTML = '<tr><td colspan="7" class="text-center">ë“±ë¡ëœ ìƒí’ˆì´ ì—†ìŠµë‹ˆë‹¤.</td></tr>';
                return;
            }
            
            tbody.innerHTML = products.map(product => `
                <tr>
                    <td>${product.product_code}</td>
                    <td title="ê´€ë¦¬ìš©: ${product.product_name}">${product.display_name || product.product_name}</td>
                    <td>${formatDate(product.product_date)}</td>
                    <td class="time-range">${formatTime(product.start_time)} - ${formatTime(product.end_time)}</td>
                    <td class="price-display">${product.price.toLocaleString()}</td>
                    <td>${formatDateTime(product.created_at)}</td>
                    <td>
                        <div class="action-buttons">
                            <button class="action-btn" onclick="editProduct('${product.id}')" 
                                    style="background: #4facfe; color: white;">ìˆ˜ì •</button>
                            <button class="action-btn delete" onclick="deleteProductConfirm('${product.id}')">ì‚­ì œ</button>
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        // ìƒí’ˆ ìˆ˜ì • (í–¥í›„ êµ¬í˜„)
        function editProduct(productId) {
            showAdminMessage('ìƒí’ˆ ìˆ˜ì • ê¸°ëŠ¥ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.', 'info');
        }

        // ìƒí’ˆ ì‚­ì œ í™•ì¸
        function deleteProductConfirm(productId) {
            currentReservationId = productId; // ê¸°ì¡´ ë³€ìˆ˜ ì¬ì‚¬ìš©
            currentAction = 'deleteProduct';
            
            document.getElementById('confirmMessage').innerHTML = `
                <p style="color: #dc3545;"><strong>ì£¼ì˜:</strong> ì´ ìƒí’ˆì„ ì™„ì „íˆ <strong>ì‚­ì œ</strong>í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</p>
                <p style="color: #666; font-size: 0.9rem; margin-top: 10px;">ì‚­ì œëœ ë°ì´í„°ëŠ” ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
            `;
            
            document.getElementById('confirmButton').onclick = executeProductDelete;
            document.getElementById('confirmModal').style.display = 'block';
        }

        // ìƒí’ˆ ì‚­ì œ ì‹¤í–‰
        async function executeProductDelete() {
            try {
                const result = await deleteProduct(currentReservationId);
                
                if (result.success) {
                    showAdminMessage('ìƒí’ˆì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
                    loadProducts();
                } else {
                    throw new Error(result.error);
                }
                
            } catch (error) {
                console.error('ìƒí’ˆ ì‚­ì œ ì˜¤ë¥˜:', error);
                showAdminMessage('ìƒí’ˆ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');
            } finally {
                closeConfirmModal();
            }
        }

        // ===============================
        // ì˜ˆì•½í˜„í™© ê´€ë ¨ í•¨ìˆ˜ë“¤
        // ===============================

        // ì˜ˆì•½í˜„í™© ëª©ë¡ ë¡œë“œ
        async function loadBookings() {
            const refreshBtn = document.getElementById('bookingRefreshText');
            refreshBtn.innerHTML = '<span class="loading-spinner"></span>';
            
            try {
                const result = await getBookings();
                if (result.success && result.data) {
                    let filteredData = result.data;
                    
                    // í•„í„° ì ìš©
                    const statusFilter = document.getElementById('bookingStatusFilter').value;
                    const dateFilter = document.getElementById('bookingDateFilter').value;
                    const customerFilter = document.getElementById('customerSearchFilter').value.trim();
                    
                    if (statusFilter) {
                        filteredData = filteredData.filter(booking => booking.status === statusFilter);
                    }
                    
                    if (dateFilter) {
                        filteredData = filteredData.filter(booking => booking.booking_date === dateFilter);
                    }
                    
                    if (customerFilter) {
                        filteredData = filteredData.filter(booking => 
                            booking.customer_name && booking.customer_name.toLowerCase().includes(customerFilter.toLowerCase())
                        );
                    }
                    
                    displayBookings(filteredData);
                    updateBookingStats(result.data); // ì „ì²´ ë°ì´í„°ë¡œ í†µê³„ ì—…ë°ì´íŠ¸
                } else {
                    throw new Error(result.error || 'ì˜ˆì•½í˜„í™©ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                }
            } catch (error) {
                console.error('ì˜ˆì•½í˜„í™© ë¡œë“œ ì˜¤ë¥˜:', error);
                let errorMessage = 'ì˜ˆì•½í˜„í™©ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.';
                
                // íŠ¹ì • ì˜¤ë¥˜ ë©”ì‹œì§€ ì²˜ë¦¬
                if (error.message && error.message.includes('relation "bookings" does not exist')) {
                    errorMessage = 'bookings í…Œì´ë¸”ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆë¥¼ ë¨¼ì € ì‹¤í–‰í•´ì£¼ì„¸ìš”.';
                } else if (error.message && error.message.includes('permission denied')) {
                    errorMessage = 'bookings í…Œì´ë¸”ì— ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤. RLS ì •ì±…ì„ í™•ì¸í•´ì£¼ì„¸ìš”.';
                } else if (error.message) {
                    errorMessage = `ì˜¤ë¥˜: ${error.message}`;
                }
                
                showAdminMessage(errorMessage, 'error');
                
                // í…Œì´ë¸”ì´ ì—†ì„ ê²½ìš° ë¹ˆ ìƒíƒœë¡œ í‘œì‹œ
                const tbody = document.getElementById('bookingsTable');
                tbody.innerHTML = '<tr><td colspan="11" class="text-center" style="color: #dc3545;">ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ì„ í™•ì¸í•´ì£¼ì„¸ìš”.</td></tr>';
            } finally {
                refreshBtn.textContent = 'ìƒˆë¡œê³ ì¹¨';
            }
        }

        // ì˜ˆì•½í˜„í™© ëª©ë¡ í‘œì‹œ
        function displayBookings(bookings) {
            const tbody = document.getElementById('bookingsTable');
            
            if (!bookings || bookings.length === 0) {
                tbody.innerHTML = '<tr><td colspan="11" class="text-center">ì˜ˆì•½í˜„í™©ì´ ì—†ìŠµë‹ˆë‹¤.</td></tr>';
                toggleEmptyState('bookings', true);
                return;
            }
            
            toggleEmptyState('bookings', false);
            
            tbody.innerHTML = bookings.map(booking => `
                <tr onclick="showBookingDetails('${booking.id || ''}')" style="cursor: pointer;">
                    <td>${booking.id ? booking.id.substring(0, 8) + '...' : '-'}</td>
                    <td>${booking.customer_name || '-'}</td>
                    <td>${booking.customer_phone || '-'}</td>
                    <td>${booking.booking_date ? formatDate(booking.booking_date) : '-'}</td>
                    <td>${booking.booking_time ? formatTime(booking.booking_time) : '-'}</td>
                    <td>${booking.product_name || '-'}</td>
                    <td>${booking.guest_count || 1}ëª…</td>
                    <td class="price-display">${booking.total_amount ? booking.total_amount.toLocaleString() : '-'}</td>
                    <td><span class="status-badge ${booking.status || 'pending'}">${getBookingStatusText(booking.status || 'pending')}</span></td>
                    <td>${booking.created_at ? formatDateTime(booking.created_at) : '-'}</td>
                    <td>
                        <div class="action-buttons">
                            <button class="action-btn" onclick="event.stopPropagation(); showBookingDetails('${booking.id || ''}')" 
                                    style="background: #4facfe; color: white;">ìƒì„¸</button>
                            ${booking.status === 'pending' ? 
                                `<button class="action-btn confirm" onclick="event.stopPropagation(); confirmBooking('${booking.id || ''}')">í™•ì •</button>` : ''}
                            ${booking.status !== 'cancelled' ? 
                                `<button class="action-btn cancel" onclick="event.stopPropagation(); cancelBooking('${booking.id || ''}')">ì·¨ì†Œ</button>` : ''}
                            <button class="action-btn delete" onclick="event.stopPropagation(); deleteBookingConfirm('${booking.id || ''}')">ì‚­ì œ</button>
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        // ì˜ˆì•½í˜„í™© í†µê³„ ì—…ë°ì´íŠ¸
        function updateBookingStats(bookings) {
            if (!bookings) return;
            
            const today = new Date().toISOString().split('T')[0];
            
            const total = bookings.length;
            const confirmed = bookings.filter(b => b.status === 'confirmed').length;
            const pending = bookings.filter(b => b.status === 'pending').length;
            const todayCount = bookings.filter(b => b.booking_date === today).length;
            
            document.getElementById('totalBookings').textContent = total;
            document.getElementById('confirmedBookings').textContent = confirmed;
            document.getElementById('pendingBookings').textContent = pending;
            document.getElementById('todayBookings').textContent = todayCount;
        }

        // ì˜ˆì•½í˜„í™© ìƒì„¸ ì •ë³´ í‘œì‹œ
        async function showBookingDetails(bookingId) {
            try {
                const result = await getBookingById(bookingId);
                if (result.success && result.data) {
                    const booking = result.data;
                    const modalBody = document.getElementById('modalBody');
                    
                    modalBody.innerHTML = `
                        <div style="line-height: 1.8;">
                            <p><strong>ì˜ˆì•½ ID:</strong> ${booking.id}</p>
                            <p><strong>ê³ ê°ëª…:</strong> ${booking.customer_name}</p>
                            <p><strong>ì—°ë½ì²˜:</strong> ${booking.customer_phone}</p>
                            <p><strong>ì´ë©”ì¼:</strong> ${booking.customer_email || '-'}</p>
                            <p><strong>ì˜ˆì•½ì¼:</strong> ${formatDate(booking.booking_date)} (${getDayOfWeek(booking.booking_date)})</p>
                            <p><strong>ì˜ˆì•½ì‹œê°„:</strong> ${formatTime(booking.booking_time)}</p>
                            <p><strong>ìƒí’ˆëª…:</strong> ${booking.product_name || '-'}</p>
                            <p><strong>ì¸ì›ìˆ˜:</strong> ${booking.guest_count || 1}ëª…</p>
                            <p><strong>ì´ ê¸ˆì•¡:</strong> <span class="price-display">${booking.total_amount ? booking.total_amount.toLocaleString() : '-'}</span></p>
                            <p><strong>ìƒíƒœ:</strong> <span class="status-badge ${booking.status}">${getBookingStatusText(booking.status)}</span></p>
                            <p><strong>íŠ¹ë³„ ìš”ì²­:</strong></p>
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-top: 10px; white-space: pre-wrap;">
                                ${booking.special_requests || 'íŠ¹ë³„ ìš”ì²­ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤.'}
                            </div>
                            <p style="margin-top: 15px;"><strong>ì˜ˆì•½ì¼ì‹œ:</strong> ${formatDateTime(booking.created_at)}</p>
                            ${booking.updated_at && booking.updated_at !== booking.created_at ? 
                                `<p><strong>ìˆ˜ì •ì¼ì‹œ:</strong> ${formatDateTime(booking.updated_at)}</p>` : ''}
                        </div>
                    `;
                    
                    document.getElementById('reservationModal').style.display = 'block';
                }
            } catch (error) {
                console.error('ì˜ˆì•½í˜„í™© ìƒì„¸ ì •ë³´ ë¡œë“œ ì˜¤ë¥˜:', error);
                showAdminMessage('ì˜ˆì•½í˜„í™© ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');
            }
        }

        // ì˜ˆì•½í˜„í™© í™•ì •
        function confirmBooking(bookingId) {
            currentReservationId = bookingId;
            currentAction = 'confirmBooking';
            
            document.getElementById('confirmMessage').innerHTML = `
                <p>ì´ ì˜ˆì•½ì„ <strong>í™•ì •</strong>í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</p>
                <p style="color: #666; font-size: 0.9rem; margin-top: 10px;">í™•ì •ëœ ì˜ˆì•½ì€ ê³ ê°ì—ê²Œ ì•Œë¦¼ì´ ë°œì†¡ë©ë‹ˆë‹¤.</p>
            `;
            
            document.getElementById('confirmButton').onclick = executeBookingAction;
            document.getElementById('confirmModal').style.display = 'block';
        }

        // ì˜ˆì•½í˜„í™© ì·¨ì†Œ
        function cancelBooking(bookingId) {
            currentReservationId = bookingId;
            currentAction = 'cancelBooking';
            
            document.getElementById('confirmMessage').innerHTML = `
                <p>ì´ ì˜ˆì•½ì„ <strong>ì·¨ì†Œ</strong>í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</p>
                <p style="color: #666; font-size: 0.9rem; margin-top: 10px;">ì·¨ì†Œëœ ì˜ˆì•½ì€ ë³µêµ¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            `;
            
            document.getElementById('confirmButton').onclick = executeBookingAction;
            document.getElementById('confirmModal').style.display = 'block';
        }

        // ì˜ˆì•½í˜„í™© ì‚­ì œ í™•ì¸
        function deleteBookingConfirm(bookingId) {
            currentReservationId = bookingId;
            currentAction = 'deleteBooking';
            
            document.getElementById('confirmMessage').innerHTML = `
                <p style="color: #dc3545;"><strong>ì£¼ì˜:</strong> ì´ ì˜ˆì•½í˜„í™©ì„ ì™„ì „íˆ <strong>ì‚­ì œ</strong>í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</p>
                <p style="color: #666; font-size: 0.9rem; margin-top: 10px;">ì‚­ì œëœ ë°ì´í„°ëŠ” ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
            `;
            
            document.getElementById('confirmButton').onclick = executeBookingAction;
            document.getElementById('confirmModal').style.display = 'block';
        }

        // ì˜ˆì•½í˜„í™© ì•¡ì…˜ ì‹¤í–‰
        async function executeBookingAction() {
            try {
                let result;
                let message;
                
                switch (currentAction) {
                    case 'confirmBooking':
                        result = await updateBooking(currentReservationId, { status: 'confirmed' });
                        message = 'ì˜ˆì•½ì´ í™•ì •ë˜ì—ˆìŠµë‹ˆë‹¤.';
                        break;
                    case 'cancelBooking':
                        result = await updateBooking(currentReservationId, { status: 'cancelled' });
                        message = 'ì˜ˆì•½ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.';
                        break;
                    case 'deleteBooking':
                        result = await deleteBooking(currentReservationId);
                        message = 'ì˜ˆì•½í˜„í™©ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.';
                        break;
                }
                
                if (result.success) {
                    showAdminMessage(message, 'success');
                    loadBookings();
                } else {
                    throw new Error(result.error);
                }
                
            } catch (error) {
                console.error('ì˜ˆì•½í˜„í™© ì•¡ì…˜ ì‹¤í–‰ ì˜¤ë¥˜:', error);
                showAdminMessage('ì‘ì—… ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');
            } finally {
                closeConfirmModal();
            }
        }

        // ì˜ˆì•½í˜„í™© ìƒíƒœ í…ìŠ¤íŠ¸ ë³€í™˜
        function getBookingStatusText(status) {
            const statusMap = {
                'pending': 'ëŒ€ê¸° ì¤‘',
                'confirmed': 'í™•ì •',
                'cancelled': 'ì·¨ì†Œ',
                'completed': 'ì™„ë£Œ'
            };
            return statusMap[status] || status;
        }

        // ë””ë°”ìš´ìŠ¤ í•¨ìˆ˜ (ê²€ìƒ‰ ìµœì í™”ìš©)
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        // ë¹ˆ ìƒíƒœ í† ê¸€ í•¨ìˆ˜
        function toggleEmptyState(sectionType, isEmpty) {
            let emptyStateId, tableId;
            
            switch(sectionType) {
                case 'dashboard':
                    emptyStateId = 'dashboardEmptyState';
                    tableId = 'recentReservationsTable';
                    break;
                case 'reservations':
                    emptyStateId = 'reservationsEmptyState';
                    tableId = 'reservationsTable';
                    break;
                case 'bookings':
                    emptyStateId = 'bookingsEmptyState';
                    tableId = 'bookingsTable';
                    break;
                default:
                    return;
            }
            
            const emptyState = document.getElementById(emptyStateId);
            const table = document.getElementById(tableId);
            
            if (isEmpty) {
                if (emptyState) emptyState.style.display = 'block';
                if (table && table.closest('.table-container')) {
                    table.closest('.table-container').style.display = 'none';
                }
            } else {
                if (emptyState) emptyState.style.display = 'none';
                if (table && table.closest('.table-container')) {
                    table.closest('.table-container').style.display = 'block';
                }
            }
        }

        // ì„¹ì…˜ í‘œì‹œ/ìˆ¨ê¹€
        function showSection(sectionName) {
            // ëª¨ë“  ì„¹ì…˜ ìˆ¨ê¸°ê¸°
            document.querySelectorAll('.section').forEach(section => {
                section.style.display = 'none';
            });
            
            // ëª¨ë“  ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ì—ì„œ active í´ë˜ìŠ¤ ì œê±°
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // ì„ íƒëœ ì„¹ì…˜ í‘œì‹œ
            document.getElementById(sectionName + '-section').style.display = 'block';
            
            // í•´ë‹¹ ë²„íŠ¼ì— active í´ë˜ìŠ¤ ì¶”ê°€
            event.target.classList.add('active');
            
            // ì„¹ì…˜ë³„ ë°ì´í„° ë¡œë“œ
            if (sectionName === 'reservations') {
                loadReservations();
            } else if (sectionName === 'bookings') {
                loadBookings();
            }
        }

        // ëŒ€ì‹œë³´ë“œ í†µê³„ ë¡œë“œ
        async function loadDashboardStats() {
            try {
                const result = await getReservations();
                if (result.success && result.data) {
                    const reservations = result.data;
                    const today = new Date().toISOString().split('T')[0];
                    
                    // í†µê³„ ê³„ì‚°
                    const total = reservations.length;
                    const todayCount = reservations.filter(r => r.reservation_date === today).length;
                    const pending = reservations.filter(r => r.status === 'pending').length;
                    const confirmed = reservations.filter(r => r.status === 'confirmed').length;
                    
                    // DOM ì—…ë°ì´íŠ¸
                    document.getElementById('totalReservations').textContent = total;
                    document.getElementById('todayReservations').textContent = todayCount;
                    document.getElementById('pendingReservations').textContent = pending;
                    document.getElementById('confirmedReservations').textContent = confirmed;
                    
                    // ë¹ˆ ë°ì´í„° ìƒíƒœ í‘œì‹œ/ìˆ¨ê¹€
                    toggleEmptyState('dashboard', total === 0);
                } else {
                    // ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨ ì‹œ 0ìœ¼ë¡œ ì´ˆê¸°í™”
                    document.getElementById('totalReservations').textContent = '0';
                    document.getElementById('todayReservations').textContent = '0';
                    document.getElementById('pendingReservations').textContent = '0';
                    document.getElementById('confirmedReservations').textContent = '0';
                    toggleEmptyState('dashboard', true);
                }
            } catch (error) {
                console.error('í†µê³„ ë¡œë“œ ì˜¤ë¥˜:', error);
                // ì˜¤ë¥˜ ë°œìƒ ì‹œ 0ìœ¼ë¡œ í‘œì‹œí•˜ê³  ë¹ˆ ìƒíƒœ ë©”ì‹œì§€ í‘œì‹œ
                document.getElementById('totalReservations').textContent = '0';
                document.getElementById('todayReservations').textContent = '0';
                document.getElementById('pendingReservations').textContent = '0';
                document.getElementById('confirmedReservations').textContent = '0';
                toggleEmptyState('dashboard', true);
            }
        }

        // ìµœê·¼ ì˜ˆì•½ ë¡œë“œ (ëŒ€ì‹œë³´ë“œìš©)
        async function loadRecentReservations() {
            try {
                const result = await getReservations();
                if (result.success && result.data) {
                    const recent = result.data.slice(0, 5); // ìµœê·¼ 5ê°œë§Œ
                    displayRecentReservations(recent);
                } else {
                    // ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨ ì‹œ ë¹ˆ ìƒíƒœ í‘œì‹œ
                    displayRecentReservations([]);
                }
            } catch (error) {
                console.error('ìµœê·¼ ì˜ˆì•½ ë¡œë“œ ì˜¤ë¥˜:', error);
                // ì˜¤ë¥˜ ë°œìƒ ì‹œ ë¹ˆ ìƒíƒœ í‘œì‹œ
                displayRecentReservations([]);
            }
        }

        // ì˜ˆì•½ ëª©ë¡ ë¡œë“œ (ê´€ë¦¬ í˜ì´ì§€ìš©)
        async function loadReservations() {
            const refreshBtn = document.getElementById('refreshText');
            refreshBtn.innerHTML = '<span class="loading-spinner"></span>';
            
            try {
                const result = await getReservations();
                if (result.success && result.data) {
                    let filteredData = result.data;
                    
                    // í•„í„° ì ìš©
                    const statusFilter = document.getElementById('statusFilter').value;
                    const dateFilter = document.getElementById('dateFilter').value;
                    
                    if (statusFilter) {
                        filteredData = filteredData.filter(r => r.status === statusFilter);
                    }
                    
                    if (dateFilter) {
                        filteredData = filteredData.filter(r => r.reservation_date === dateFilter);
                    }
                    
                    displayReservations(filteredData);
                    loadDashboardStats(); // í†µê³„ë„ í•¨ê»˜ ì—…ë°ì´íŠ¸
                } else {
                    // ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨ ì‹œ ë¹ˆ ìƒíƒœ í‘œì‹œ
                    displayReservations([]);
                }
            } catch (error) {
                console.error('ì˜ˆì•½ ëª©ë¡ ë¡œë“œ ì˜¤ë¥˜:', error);
                showAdminMessage('ì˜ˆì•½ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');
                // ì˜¤ë¥˜ ë°œìƒ ì‹œ ë¹ˆ ìƒíƒœ í‘œì‹œ
                displayReservations([]);
            } finally {
                refreshBtn.textContent = 'ìƒˆë¡œê³ ì¹¨';
            }
        }

        // ê´€ë¦¬ì ë©”ì‹œì§€ í‘œì‹œ
        function showAdminMessage(text, type = 'success') {
            const messageContainer = document.getElementById('adminMessageContainer');
            const messageContent = document.getElementById('adminMessageContent');
            
            messageContent.textContent = text;
            messageContent.className = `message ${type}`;
            messageContainer.style.display = 'block';
            
            setTimeout(() => hideAdminMessage(), 5000);
        }

        // ê´€ë¦¬ì ë©”ì‹œì§€ ìˆ¨ê¸°ê¸°
        function hideAdminMessage() {
            document.getElementById('adminMessageContainer').style.display = 'none';
        }

        // ê¸°íƒ€ ê´€ë¦¬ì í˜ì´ì§€ í•¨ìˆ˜ë“¤ì€ ë‹¤ìŒ ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ì—ì„œ ê³„ì†...
    </script>
</body>
</html>